create table t1 (s1 binary(3));
insert into t1 values (0x61), (0x6120), (0x612020);
select hex(s1) from t1;
hex(s1)
610000
612000
612020
drop table t1;
create table t1 (s1 binary(2), s2 varbinary(2));
insert into t1 values (0x4100,0x4100);
select length(concat('*',s1,'*',s2,'*')) from t1;
length(concat('*',s1,'*',s2,'*'))
7
delete from t1;
insert into t1 values (0x4120,0x4120);
select length(concat('*',s1,'*',s2,'*')) from t1;
length(concat('*',s1,'*',s2,'*'))
7
drop table t1;
create table t1 (s1 varbinary(20), s2 varbinary(20));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `s1` varbinary(20) DEFAULT NULL,
  `s2` varbinary(20) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1
insert into t1 values (0x41,0x4100),(0x41,0x4120),(0x4100,0x4120);
select hex(s1), hex(s2) from t1;
hex(s1)	hex(s2)
41	4100
41	4120
4100	4120
select count(*) from t1 where s1 < s2;
count(*)
3
drop table t1;
create table t1 (s1 varbinary(2), s2 varchar(1));
insert into t1 values (0x41,'a'), (0x4100,'b'), (0x41,'c'), (0x4100,'d');
select hex(s1),s2 from t1 order by s1,s2;
hex(s1)	s2
41	a
41	c
4100	b
4100	d
drop table t1;
create table t1 (s1 binary(2) primary key);
insert into t1 values (0x01);
insert into t1 values (0x0120);
insert into t1 values (0x0100);
ERROR 23000: Duplicate entry '\x01' for key 'PRIMARY'
select hex(s1) from t1 order by s1;
hex(s1)
0100
0120
select hex(s1) from t1 where s1=0x01;
hex(s1)
select hex(s1) from t1 where s1=0x0120;
hex(s1)
0120
select hex(s1) from t1 where s1=0x0100;
hex(s1)
0100
select count(distinct s1) from t1;
count(distinct s1)
2
alter table t1 drop primary key;
select hex(s1) from t1 where s1=0x01;
hex(s1)
select hex(s1) from t1 where s1=0x0120;
hex(s1)
0120
select hex(s1) from t1 where s1=0x0100;
hex(s1)
0100
select count(distinct s1) from t1;
count(distinct s1)
2
drop table t1;
create table t1 (s1 varbinary(2) primary key);
insert into t1 values (0x01);
insert into t1 values (0x0120);
insert into t1 values (0x0100);
select hex(s1) from t1 order by s1;
hex(s1)
01
0100
0120
select hex(s1) from t1 where s1=0x01;
hex(s1)
01
select hex(s1) from t1 where s1=0x0120;
hex(s1)
0120
select hex(s1) from t1 where s1=0x0100;
hex(s1)
0100
select count(distinct s1) from t1;
count(distinct s1)
3
alter table t1 drop primary key;
select hex(s1) from t1 where s1=0x01;
hex(s1)
01
select hex(s1) from t1 where s1=0x0120;
hex(s1)
0120
select hex(s1) from t1 where s1=0x0100;
hex(s1)
0100
select count(distinct s1) from t1;
count(distinct s1)
3
drop table t1;
select hex(cast(0x10 as binary(2)));
hex(cast(0x10 as binary(2)))
1000
create table t1 (b binary(2), vb varbinary(2));
insert into t1 values(0x4120, 0x4120);
insert ignore into t1 values(0x412020, 0x412020);
Warnings:
Warning	1265	Data truncated for column 'b' at row 1
Warning	1265	Data truncated for column 'vb' at row 1
drop table t1;
create table t1 (c char(2), vc varchar(2));
insert into t1 values(0x4120, 0x4120);
insert into t1 values(0x412020, 0x412020);
Warnings:
Note	1265	Data truncated for column 'vc' at row 1
drop table t1;
set @old_sql_mode= @@sql_mode, sql_mode= 'traditional';
create table t1 (b binary(2), vb varbinary(2));
insert into t1 values(0x4120, 0x4120);
insert into t1 values(0x412020, NULL);
ERROR 22001: Data too long for column 'b' at row 1
insert into t1 values(NULL, 0x412020);
ERROR 22001: Data too long for column 'vb' at row 1
drop table t1;
set @@sql_mode= @old_sql_mode;
create table t1(f1 int, f2 binary(2) not null, f3 char(2) not null);
insert ignore into t1 set f1=1;
Warnings:
Warning	1364	Field 'f2' doesn't have a default value
Warning	1364	Field 'f3' doesn't have a default value
select hex(f2), hex(f3) from t1;
hex(f2)	hex(f3)
0000	
drop table t1;
End of 5.0 tests
#
# Start of 10.0 tests
#
#
# MDEV-8472 BINARY, VARBINARY and BLOB return different warnings on CAST to DECIMAL
#
SET NAMES utf8;
CREATE TABLE t1 (a BINARY(30));
INSERT INTO t1 VALUES ('1äÖüß@µ*$');
SELECT CAST(a AS DECIMAL) FROM t1;
CAST(a AS DECIMAL)
1
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '1\xC3\xA4\xC3\x96\xC3\xBC\xC3\x9F@\xC2\xB5*$\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
DROP TABLE t1;
CREATE TABLE t1 (a VARBINARY(30));
INSERT INTO t1 VALUES ('1äÖüß@µ*$');
SELECT CAST(a AS DECIMAL) FROM t1;
CAST(a AS DECIMAL)
1
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '1\xC3\xA4\xC3\x96\xC3\xBC\xC3\x9F@\xC2\xB5*$'
DROP TABLE t1;
CREATE TABLE t1 (a BLOB);
INSERT INTO t1 VALUES ('1äÖüß@µ*$');
SELECT CAST(a AS DECIMAL) FROM t1;
CAST(a AS DECIMAL)
1
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '1\xC3\xA4\xC3\x96\xC3\xBC\xC3\x9F@\xC2\xB5*$'
DROP TABLE t1;
#
# End of 10.0 tests
#
#
# Start of 10.4 tests
#
#
# MDEV-19180 Long hex hybrids get cut in DEFAULT expressions
#
CREATE TABLE t1 (
a01 VARBINARY(16) DEFAULT CAST(0x00 AS BINARY),
a02 VARBINARY(16) DEFAULT CAST(0x0011 AS BINARY),
a03 VARBINARY(16) DEFAULT CAST(0x001122 AS BINARY),
a04 VARBINARY(16) DEFAULT CAST(0x00112233 AS BINARY),
a05 VARBINARY(16) DEFAULT CAST(0x0011223344 AS BINARY),
a06 VARBINARY(16) DEFAULT CAST(0x001122334455 AS BINARY),
a07 VARBINARY(16) DEFAULT CAST(0x00112233445566 AS BINARY),
a08 VARBINARY(16) DEFAULT CAST(0x0011223344556677 AS BINARY),
a09 VARBINARY(16) DEFAULT CAST(0x001122334455667788 AS BINARY),
a10 VARBINARY(16) DEFAULT CAST(0x00112233445566778899 AS BINARY),
a11 VARBINARY(16) DEFAULT CAST(0x00112233445566778899AA AS BINARY),
a12 VARBINARY(16) DEFAULT CAST(0x00112233445566778899AABB AS BINARY),
a13 VARBINARY(16) DEFAULT CAST(0x00112233445566778899AABBCC AS BINARY),
a14 VARBINARY(16) DEFAULT CAST(0x00112233445566778899AABBCCDD AS BINARY),
a15 VARBINARY(16) DEFAULT CAST(0x00112233445566778899AABBCCDDEE AS BINARY),
a16 VARBINARY(16) DEFAULT CAST(0x00112233445566778899AABBCCDDEEFF AS BINARY),
b01 VARBINARY(16) DEFAULT CAST(X'00' AS BINARY),
b02 VARBINARY(16) DEFAULT CAST(X'0011' AS BINARY),
b03 VARBINARY(16) DEFAULT CAST(X'001122' AS BINARY),
b04 VARBINARY(16) DEFAULT CAST(X'00112233' AS BINARY),
b05 VARBINARY(16) DEFAULT CAST(X'0011223344' AS BINARY),
b06 VARBINARY(16) DEFAULT CAST(X'001122334455' AS BINARY),
b07 VARBINARY(16) DEFAULT CAST(X'00112233445566' AS BINARY),
b08 VARBINARY(16) DEFAULT CAST(X'0011223344556677' AS BINARY),
b09 VARBINARY(16) DEFAULT CAST(X'001122334455667788' AS BINARY),
b10 VARBINARY(16) DEFAULT CAST(X'00112233445566778899' AS BINARY),
b11 VARBINARY(16) DEFAULT CAST(X'00112233445566778899AA' AS BINARY),
b12 VARBINARY(16) DEFAULT CAST(X'00112233445566778899AABB' AS BINARY),
b13 VARBINARY(16) DEFAULT CAST(X'00112233445566778899AABBCC' AS BINARY),
b14 VARBINARY(16) DEFAULT CAST(X'00112233445566778899AABBCCDD' AS BINARY),
b15 VARBINARY(16) DEFAULT CAST(X'00112233445566778899AABBCCDDEE' AS BINARY),
b16 VARBINARY(16) DEFAULT CAST(X'00112233445566778899AABBCCDDEEFF' AS BINARY)
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a01` varbinary(16) DEFAULT (cast(0x00 as char charset binary)),
  `a02` varbinary(16) DEFAULT (cast(0x0011 as char charset binary)),
  `a03` varbinary(16) DEFAULT (cast(0x001122 as char charset binary)),
  `a04` varbinary(16) DEFAULT (cast(0x00112233 as char charset binary)),
  `a05` varbinary(16) DEFAULT (cast(0x0011223344 as char charset binary)),
  `a06` varbinary(16) DEFAULT (cast(0x001122334455 as char charset binary)),
  `a07` varbinary(16) DEFAULT (cast(0x00112233445566 as char charset binary)),
  `a08` varbinary(16) DEFAULT (cast(0x0011223344556677 as char charset binary)),
  `a09` varbinary(16) DEFAULT (cast(X'001122334455667788' as char charset binary)),
  `a10` varbinary(16) DEFAULT (cast(X'00112233445566778899' as char charset binary)),
  `a11` varbinary(16) DEFAULT (cast(X'00112233445566778899aa' as char charset binary)),
  `a12` varbinary(16) DEFAULT (cast(X'00112233445566778899aabb' as char charset binary)),
  `a13` varbinary(16) DEFAULT (cast(X'00112233445566778899aabbcc' as char charset binary)),
  `a14` varbinary(16) DEFAULT (cast(X'00112233445566778899aabbccdd' as char charset binary)),
  `a15` varbinary(16) DEFAULT (cast(X'00112233445566778899aabbccddee' as char charset binary)),
  `a16` varbinary(16) DEFAULT (cast(X'00112233445566778899aabbccddeeff' as char charset binary)),
  `b01` varbinary(16) DEFAULT (cast(X'00' as char charset binary)),
  `b02` varbinary(16) DEFAULT (cast(X'0011' as char charset binary)),
  `b03` varbinary(16) DEFAULT (cast(X'001122' as char charset binary)),
  `b04` varbinary(16) DEFAULT (cast(X'00112233' as char charset binary)),
  `b05` varbinary(16) DEFAULT (cast(X'0011223344' as char charset binary)),
  `b06` varbinary(16) DEFAULT (cast(X'001122334455' as char charset binary)),
  `b07` varbinary(16) DEFAULT (cast(X'00112233445566' as char charset binary)),
  `b08` varbinary(16) DEFAULT (cast(X'0011223344556677' as char charset binary)),
  `b09` varbinary(16) DEFAULT (cast(X'001122334455667788' as char charset binary)),
  `b10` varbinary(16) DEFAULT (cast(X'00112233445566778899' as char charset binary)),
  `b11` varbinary(16) DEFAULT (cast(X'00112233445566778899aa' as char charset binary)),
  `b12` varbinary(16) DEFAULT (cast(X'00112233445566778899aabb' as char charset binary)),
  `b13` varbinary(16) DEFAULT (cast(X'00112233445566778899aabbcc' as char charset binary)),
  `b14` varbinary(16) DEFAULT (cast(X'00112233445566778899aabbccdd' as char charset binary)),
  `b15` varbinary(16) DEFAULT (cast(X'00112233445566778899aabbccddee' as char charset binary)),
  `b16` varbinary(16) DEFAULT (cast(X'00112233445566778899aabbccddeeff' as char charset binary))
) ENGINE=MyISAM DEFAULT CHARSET=latin1
DROP TABLE t1;
#
# End of 10.4 tests
#
